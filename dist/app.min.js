!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./game_manager");window.onload=function(){new d}},{"./game_manager":5}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(b,c){d(this,a),this.canvas=document.getElementById("game-canvas"),this.pipes=c,this.canvas.addEventListener("click",this.getClickHandler(),!1)}return a.prototype.getClickHandler=function(){var a=this;return function(b){var c=Math.floor((b.pageX-a.canvas.offsetLeft)/50),d=Math.floor((b.pageY-a.canvas.offsetTop)/50);a.pipes.at(c,d).rotate()}},a}();b.exports=e},{}],3:[function(a,b,c){"use strict";b.exports={GRID_WIDTH:1e3,GRID_HEIGHT:600,CELL_SIZE:50,FILL_SPEED:200,FPS:5,START_PIPE:{col:19,row:0}}},{}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=a("./pipe"),g=a("./config"),h=function(a){function b(c,e){d(this,b),a.call(this,c,e)}return e(b,a),b.prototype.fill=function(b,c){var d=this;this.entry=b,a.prototype.fill.call(this,function(){var a=d.getNextEntry(b);c(a)})},b.prototype.hasEntry=function(a){return"top"===a?0===this.rotation||1===this.rotation:"bottom"===a?2===this.rotation||3===this.rotation:"left"===a?0===this.rotation||3===this.rotation:"right"===a?1===this.rotation||2===this.rotation:!1},b.prototype.getNextEntry=function(a){var b=void 0;switch(a){case"top":b=0===this.rotation?"right":"left";break;case"left":b=0===this.rotation?"bottom":"top";break;case"right":b=1===this.rotation?"bottom":"top";break;case"bottom":b=3===this.rotation?"right":"left"}return b},b.prototype.render=function(a){var b=new Path2D;switch(b.arc(5,5,8,0,Math.PI/2,!1),b.moveTo(35,5),b.arc(5,5,30,0,Math.PI/2,!1),a.save(),this.rotation){case 0:a.translate(this.xOffset,this.yOffset);break;case 1:a.translate(this.xOffset+g.CELL_SIZE,this.yOffset),a.rotate(Math.PI/2);break;case 2:a.translate(this.xOffset+g.CELL_SIZE,this.yOffset+g.CELL_SIZE),a.rotate(Math.PI);break;case 3:a.translate(this.xOffset,this.yOffset+g.CELL_SIZE),a.rotate(1.5*Math.PI)}a.stroke(b),a.strokeRect(0,10,5,30),a.strokeRect(10,0,30,5),this.renderWaterLevel(a),a.restore()},b.prototype.renderWaterLevel=function(a){this.water>0&&(a.fillStyle="rgb(51, 204, 255)",a.beginPath(),0===this.rotation&&"top"===this.entry||1===this.rotation&&"right"===this.entry||2===this.rotation&&"bottom"===this.entry||3===this.rotation&&"left"===this.entry?(a.arc(6,6,7,0,Math.PI/2*this.water/100,!1),a.arc(6,6,28,Math.PI/2*this.water/100,0,!0)):(a.arc(6,6,7,Math.PI/2,Math.PI/2-Math.PI/2*this.water/100,!0),a.arc(6,6,28,Math.PI/2-Math.PI/2*this.water/100,Math.PI/2,!1)),a.fill())},b}(f);b.exports=h},{"./config":3,"./pipe":7}],5:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./config"),f=a("./grid"),g=a("./pipes"),h=a("./render_manager"),i=a("./click_controller"),j=function(){function a(){d(this,a),this.canvas=document.getElementById("game-canvas"),this.grid=new f,this.pipes=new g,this.renderManager=new h(this.canvas,this.grid,this.pipes),this.clickManager=new i(this.canvas,this.pipes),this.startWaterFlow()}return a.prototype.startWaterFlow=function(){var a=this.coords=e.START_PIPE,b=a.col,c=a.row,d=this.pipes.at(b,c);d.rotation=0,this.fillPipe("top",d)},a.prototype.fillPipe=function(a,b){var c=this;b.fill(a,function(a){var b=c.getNextPipe(a);return b&&b.hasEntry(a)?c.fillPipe(a,b):void console.log("Game Over")})},a.prototype.getNextPipe=function(a){var b=this.coords=this.getNextCoords(a),c=b.col,d=b.row;return this.pipes.at(c,d)},a.prototype.getNextCoords=function(a){var b=this.coords,c=b.col,d=b.row;switch(a){case"left":++c;break;case"right":--c;break;case"top":++d;break;case"bottom":--d}return{col:c,row:d}},a}();b.exports=j},{"./click_controller":2,"./config":3,"./grid":6,"./pipes":8,"./render_manager":9}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./config"),f=.7,g=1,h=function(){function a(){d(this,a)}return a.prototype.render=function(a){var b=new Path2D,c=e.GRID_WIDTH/e.CELL_SIZE,d=e.GRID_HEIGHT/e.CELL_SIZE;this.drawGridLines(c,e.GRID_HEIGHT,function(a,c,d){b.moveTo(d,a),b.lineTo(d,c)}),this.drawGridLines(d,e.GRID_WIDTH,function(a,c,d){b.moveTo(a,d),b.lineTo(c,d)}),a.lineWidth=f,a.stroke(b),a.lineWidth=g},a.prototype.drawGridLines=function(a,b,c){var d=void 0,f=void 0,g=void 0,h=void 0;for(d=0;a+1>d;d++)h=d*e.CELL_SIZE,f=0,g=b,c(f,g,h)},a}();b.exports=h},{"./config":3}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./config"),f=function(){function a(b,c){d(this,a),this.col=b,this.row=c,this.water=0,this.calculateOffsets(),this.setInitialRotation()}return a.prototype.calculateOffsets=function(){this.xOffset=this.col*e.CELL_SIZE,this.yOffset=this.row*e.CELL_SIZE},a.prototype.setInitialRotation=function(){this.rotation=Math.floor(4*Math.random())},a.prototype.fill=function(a){var b=this,c=setInterval(function(){return b.water>=100?(clearInterval(c),a()):void(b.water+=10)},e.FILL_SPEED)},a.prototype.rotate=function(){0===this.water&&(this.rotation=++this.rotation%4)},a}();b.exports=f},{"./config":3}],8:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./config"),f=a("./straight"),g=a("./elbow"),h=function(){function a(){d(this,a),this.populateCells()}return a.prototype.populateCells=function(){var a=e.GRID_HEIGHT/e.CELL_SIZE,b=e.GRID_WIDTH/e.CELL_SIZE;this.cells=[];for(var c=0;b>c;c++){this.cells[c]=[];for(var d=0;a>d;d++)this.cells[c][d]=this.getRandomPipe(c,d)}},a.prototype.getRandomPipe=function(a,b){return Math.random()<=.5?new g(a,b):new f(a,b)},a.prototype.at=function(a,b){return void 0!==this.cells[a]&&void 0!==this.cells[a][b]?this.cells[a][b]:void 0},a.prototype.render=function(a){this.cells.forEach(function(b){b.forEach(function(b){b.render(a)})})},a}();b.exports=h},{"./config":3,"./elbow":4,"./straight":10}],9:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=a("./config"),f=1e3/e.FPS,g=void 0,h=function(){function a(b,c,e){d(this,a),this.canvas=b,this.grid=c,this.pipes=e,g=Date.now(),this.context=this.canvas.getContext("2d"),this.render()}return a.prototype.render=function(){window.requestAnimationFrame(this.render.bind(this));var a=Date.now(),b=a-g;b>f&&(g=a-b%f,this.context.clearRect(0,0,e.GRID_WIDTH,e.GRID_HEIGHT),this.grid.render(this.context),this.pipes.render(this.context))},a}();b.exports=h},{"./config":3}],10:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=a("./pipe"),g=a("./config"),h=function(a){function b(c,e){d(this,b),a.call(this,c,e)}return e(b,a),b.prototype.fill=function(b,c){this.entry=b,a.prototype.fill.call(this,function(){return c(b)})},b.prototype.hasEntry=function(a){return"top"===a||"bottom"===a?0===this.rotation||2===this.rotation:1===this.rotation||3===this.rotation},b.prototype.render=function(a){var b=new Path2D;switch(b.moveTo(5,15),b.lineTo(45,15),b.moveTo(5,35),b.lineTo(45,35),a.save(),this.rotation){case 1:case 3:a.translate(this.xOffset,this.yOffset);break;case 0:case 2:a.translate(this.xOffset+g.CELL_SIZE,this.yOffset),a.rotate(Math.PI/2)}a.stroke(b),a.strokeRect(0,10,5,30),a.strokeRect(45,10,5,30),this.renderWaterLevel(a),a.restore()},b.prototype.renderWaterLevel=function(a){this.water>0&&(a.fillStyle="rgb(51, 204, 255)",(1===this.rotation||3===this.rotation)&&"left"===this.entry||(0===this.rotation||2===this.rotation)&&"top"===this.entry?a.fillRect(6,16,38*this.water/100,18):a.fillRect(44-38*this.water/100,16,38*this.water/100,18))},b}(f);b.exports=h},{"./config":3,"./pipe":7}]},{},[1]);