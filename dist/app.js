!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.GRID_WIDTH=1e3,e.GRID_HEIGHT=600,e.CELL_SIZE=50,e.START_PIPE={col:19,row:0},e.FILL_SPEED=200,e.WATER_COLOR="rgb(51, 204, 255)",e.FPS=5},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=function(){function t(e,n){r(this,t),this.col=e,this.row=n,this.waterLevel=0,this.calculateOffsets(),this.setInitialRotation()}return o(t,[{key:"calculateOffsets",value:function(){this.xOffset=this.col*i.CELL_SIZE,this.yOffset=this.row*i.CELL_SIZE}},{key:"setInitialRotation",value:function(){this.rotation=Math.floor(4*Math.random())}},{key:"fill",value:function(t,e){var n=this;this.entry=t;var r=setInterval(function(){if(n.waterLevel>=100){var o=n.getExit(t);return clearInterval(r),e(o)}n.waterLevel+=10},i.FILL_SPEED)}},{key:"rotate",value:function(){0===this.waterLevel&&(this.rotation=++this.rotation%4)}}]),t}();e.default=a},function(t,e,n){"use strict";var r=n(5),o=function(t){return t&&t.__esModule?t:{default:t}}(r);window.addEventListener("load",function(){new o.default})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,n){r(this,t),this.canvas=e,this.pipes=n,this.canvas.addEventListener("click",this.handleClick.bind(this),!1)}return o(t,[{key:"handleClick",value:function(t){var e=Math.floor((t.pageX-this.canvas.offsetLeft)/50),n=Math.floor((t.pageY-this.canvas.offsetTop)/50);this.pipes.at(e,n).rotate()}}]),t}();e.default=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(0),f={0:"left-top",1:"right-top",2:"right-bottom",3:"left-bottom"},c={0:["left","top"],1:["right","top"],2:["right","bottom"],3:["left","bottom"]},h=function(t){function e(t,n){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return i(e,t),a(e,[{key:"hasEntry",value:function(t){return c[this.rotation].indexOf(t)>-1}},{key:"getExit",value:function(t){var e=void 0;return c[this.rotation].forEach(function(n){n!==t&&(e=n)}),e}},{key:"render",value:function(t){var e=new Path2D;switch(e.arc(5,5,8,0,Math.PI/2,!1),e.moveTo(35,5),e.arc(5,5,30,0,Math.PI/2,!1),t.save(),f[this.rotation]){case"left-top":t.translate(this.xOffset,this.yOffset);break;case"right-top":t.translate(this.xOffset+l.CELL_SIZE,this.yOffset),t.rotate(Math.PI/2);break;case"right-bottom":t.translate(this.xOffset+l.CELL_SIZE,this.yOffset+l.CELL_SIZE),t.rotate(Math.PI);break;case"left-bottom":t.translate(this.xOffset,this.yOffset+l.CELL_SIZE),t.rotate(1.5*Math.PI)}t.stroke(e),t.strokeRect(0,10,5,30),t.strokeRect(10,0,30,5),this.renderWaterLevel(t),t.restore()}},{key:"renderWaterLevel",value:function(t){this.waterLevel>0&&(t.fillStyle=l.WATER_COLOR,t.beginPath(),"left-top"===f[this.rotation]&&"top"===this.entry||"right-top"===f[this.rotation]&&"right"===this.entry||"right-bottom"===f[this.rotation]&&"bottom"===this.entry||"left-bottom"===f[this.rotation]&&"left"===this.entry?(t.arc(6,6,7,0,Math.PI/2*this.waterLevel/100,!1),t.arc(6,6,28,Math.PI/2*this.waterLevel/100,0,!0)):(t.arc(6,6,7,Math.PI/2,Math.PI/2-Math.PI/2*this.waterLevel/100,!0),t.arc(6,6,28,Math.PI/2-Math.PI/2*this.waterLevel/100,Math.PI/2,!1)),t.fill())}}]),e}(u.default);e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),s=n(6),u=r(s),l=n(7),f=r(l),c=n(8),h=r(c),v=n(3),p=r(v),d={top:"bottom",bottom:"top",left:"right",right:"left"},y=function(){function t(){o(this,t),this.canvas=document.getElementById("game-canvas"),this.grid=new u.default,this.pipes=new f.default,this.renderManager=new h.default(this.canvas,this.grid,this.pipes),this.clickController=new p.default(this.canvas,this.pipes),this.coords=a.START_PIPE,this.startWaterFlow()}return i(t,[{key:"startWaterFlow",value:function(){var t=this.coords,e=t.col,n=t.row,r=this.pipes.at(e,n);r.rotation=0,this.fillPipe("top",r)}},{key:"fillPipe",value:function(t,e){var n=this;e.fill(t,function(t){n.coords=n.getNextCoords(t);var e=n.coords,r=e.col,o=e.row,i=d[t],a=n.pipes.at(r,o);if(a&&a.hasEntry(i))return n.fillPipe(i,a);console.log("Game Over")})}},{key:"getNextCoords",value:function(t){var e=this.coords,n=e.col,r=e.row;switch(t){case"left":return{col:n-1,row:r};case"right":return{col:n+1,row:r};case"top":return{col:n,row:r-1};case"bottom":return{col:n,row:r+1}}}}]),t}();e.default=y},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=function(){function t(){r(this,t)}return o(t,[{key:"render",value:function(t){var e=new Path2D,n=i.GRID_WIDTH/i.CELL_SIZE,r=i.GRID_HEIGHT/i.CELL_SIZE;this.drawGridLines(n,i.GRID_HEIGHT,function(t,n,r){e.moveTo(r,t),e.lineTo(r,n)}),this.drawGridLines(r,i.GRID_WIDTH,function(t,n,r){e.moveTo(t,r),e.lineTo(n,r)}),t.lineWidth=.7,t.stroke(e),t.lineWidth=1}},{key:"drawGridLines",value:function(t,e,n){var r=void 0,o=void 0,a=void 0,s=void 0;for(r=0;r<t+1;r++)s=r*i.CELL_SIZE,o=0,a=e,n(o,a,s)}}]),t}();e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(9),s=r(a),u=n(4),l=r(u),f=n(0),c=function(){function t(){o(this,t),this.populateCells()}return i(t,[{key:"populateCells",value:function(){var t=f.GRID_HEIGHT/f.CELL_SIZE,e=f.GRID_WIDTH/f.CELL_SIZE;this.cells=[];for(var n=0;n<e;n++){this.cells[n]=[];for(var r=0;r<t;r++)this.cells[n][r]=this.getRandomPipe(n,r)}}},{key:"getRandomPipe",value:function(t,e){return Math.random()<=.5?new l.default(t,e):new s.default(t,e)}},{key:"at",value:function(t,e){if(void 0!==this.cells[t]&&void 0!==this.cells[t][e])return this.cells[t][e]}},{key:"render",value:function(t){this.cells.forEach(function(e){e.forEach(function(e){e.render(t)})})}}]),t}();e.default=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(0),a=1e3/i.FPS,s=function(){function t(e,n,o){r(this,t),this.grid=n,this.pipes=o,this.startTime=Date.now(),this.context=e.getContext("2d"),this.render()}return o(t,[{key:"render",value:function(){window.requestAnimationFrame(this.render.bind(this));var t=Date.now(),e=t-this.startTime;e>a&&(this.startTime=t-e%a,this.context.clearRect(0,0,i.GRID_WIDTH,i.GRID_HEIGHT),this.grid.render(this.context),this.pipes.render(this.context))}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=n(0),f={0:"vertical",1:"horizontal",2:"vertical",3:"horizontal"},c={0:["top","bottom"],1:["left","right"],2:["top","bottom"],3:["left","right"]},h=function(t){function e(t,n){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return i(e,t),a(e,[{key:"hasEntry",value:function(t){return c[this.rotation].indexOf(t)>-1}},{key:"getExit",value:function(t){var e=void 0;return c[this.rotation].forEach(function(n){n!==t&&(e=n)}),e}},{key:"render",value:function(t){var e=new Path2D;switch(e.moveTo(5,15),e.lineTo(45,15),e.moveTo(5,35),e.lineTo(45,35),t.save(),f[this.rotation]){case"horizontal":t.translate(this.xOffset,this.yOffset);break;case"vertical":t.translate(this.xOffset+l.CELL_SIZE,this.yOffset),t.rotate(Math.PI/2)}t.stroke(e),t.strokeRect(0,10,5,30),t.strokeRect(45,10,5,30),this.renderWaterLevel(t),t.restore()}},{key:"renderWaterLevel",value:function(t){this.waterLevel>0&&(t.fillStyle=l.WATER_COLOR,"horizontal"===f[this.rotation]&&"left"===this.entry||"vertical"===f[this.rotation]&&"top"===this.entry?t.fillRect(6,16,38*this.waterLevel/100,18):t.fillRect(44-38*this.waterLevel/100,16,38*this.waterLevel/100,18))}}]),e}(u.default);e.default=h},function(t,e,n){t.exports=n(2)}]);